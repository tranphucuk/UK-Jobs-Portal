var wishlist={init:function(){this.loadData();this.registerEvents();this.loadCkEditor()},registerEvents:function(){$("body").on("click",".btnViewWishlist",function(){var n=$(this).data("user"),t=$(this).data("id");$.ajax({type:"GET",url:"/Admin/UserJob/GetWishlistDetail",data:{userId:n,jobId:t},beforeSend:common.runLoadingIndicator(),success:function(n){$("#txt-industry").val(n.Job.Industry);$("#txt-company").val(n.Job.Company);CKEDITOR.instances["txt-wishlist-content"].setData(n.UserNote);$("#modal-wishlist").modal("show");common.stopLoadingIndicator()}})})},loadData:function(){var n="",t=$("#tbl-wishlist-template").html(),i=$(this).data("id");$.ajax({type:"GET",url:"/Admin/UserJob/GetAllPaging",data:{keyword:$("#txt-blog-keyword").val(),page:config.pageIndex,pageSize:config.pageSize},beforeSend:common.runLoadingIndicator(),success:function(i){$.each(i.Result,function(i,r){var u={};u.Id=r.Id;u.userId=r.AppUser.Id;u.Username=r.AppUser.UserName;u.AddedDate=common.formatDateTime(r.CreatedDate);u.JobName=r.Job.Industry;u.Company=r.Job.Company;u.jobId=r.Job.Id;n+=Mustache.render(t,u)});$("#tbl-wishlist-content").html(n);i.Total>0&&wishlist.paging(i.Total);$("#lbl-total-wishlist").html(i.Total);common.stopLoadingIndicator()},error:function(){common.notify("An error has occurred while loading data","error");common.stopLoadingIndicator()}})},paging:function(n){var t=Math.ceil(n/config.pageSize);$("#pagination-wishlist").twbsPagination({totalPages:t,visiblePages:5,onPageClick:function(n,t){t!=config.pageIndex&&(config.pageIndex=t,wishlist.loadData())}})},loadCkEditor:function(){CKEDITOR.replace("txtWishlistContent",{language:"en",height:"280px"});$.fn.modal.Constructor.prototype.enforceFocus=function(){$(document).off("focusin.bs.modal").on("focusin.bs.modal",$.proxy(function(n){this.$element[0]===n.target||this.$element.has(n.target).length||$(n.target).closest(".cke_dialog, .cke").length||this.$element.trigger("focus")},this))}}};wishlist.init();